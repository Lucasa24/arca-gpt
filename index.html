<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>üõ•Ô∏è A Arca - Ritual de Travessia üåä</title>
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      background-color: #0e0e0e;
      color: #f5f5f5;
      font-family: 'Georgia', serif;
      padding: 40px 1rem 300px;
      line-height: 1.6;
      max-width: 700px;
      width: 100%;
      margin: 0 auto;
      position: relative;
    }
    h1 {
      font-size: clamp(1.5rem, 5vw, 2.5rem);
      text-align: center;
      margin: 0 0 1.5rem 0;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    #response {
      margin-top: 2rem;
      white-space: pre-wrap;
      background: #1c1c1c;
      padding: 1rem;
      border-left: 4px solid #b30000;
      overflow-wrap: break-word;
      word-wrap: break-word;
      word-break: break-word;
      text-align: justify;
      line-height: 1.8;
      letter-spacing: 0.5px;
    }

    .fixed-footer {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #0e0e0e;
      padding: 0.5rem 1rem 0.75rem;
      border-top: 1px solid #333;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.4);
      font-size: 0.85rem;
      width: 100%;
      z-index: 100;
    }

    .input-group {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      gap: 0.5rem;
      max-width: 700px;
      width: 100%;
      margin: 0 auto;
    }

    textarea {
      flex: 1;
      background: #1a1a1a;
      color: #f5f5f5;
      border: 1px solid #333;
      padding: 0.5rem;
      font-size: 0.75rem;
      resize: none;
      height: 55px;
      font-family: 'Georgia', serif;
      width: 100%;
    }

    button {
      background-color: #b30000;
      color: #fff;
      border: none;
      font-size: 0.75rem;
      cursor: pointer;
      letter-spacing: 1px;
      padding: 0.5rem 1rem;
      height: 55px;
      min-width: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      white-space: nowrap;
    }

    button:hover {
      background-color: #ff1a1a;
    }

    #loader {
      height: 4px;
      margin-top: 0.25rem;
    }

    #loadingBar {
      height: 100%;
      background-color: #b30000;
      width: 0%;
      transition: width 0.3s ease-in-out;
    }

    .footer-note {
      font-size: 0.55rem;
      color: #555;
      margin-top: 0.25rem;
      text-align: center;
      opacity: 0.7;
    }
    /* Media Queries para responsividade */
    @media (max-width: 600px) {
      body {
        padding: 20px 0.75rem 250px;
      }
      
      h1 {
        font-size: clamp(1.2rem, 4vw, 1.8rem);
        margin-bottom: 1rem;
      }
      
      #response {
        padding: 0.75rem;
        margin-top: 1.5rem;
      }
      
      .fixed-footer {
        padding: 0.5rem 0.75rem;
      }
      
      button {
        padding: 0.5rem 0.75rem;
        min-width: 70px;
      }
      
      textarea {
        font-size: 0.7rem;
      }
    }
    
    @media (max-width: 400px) {
      body {
        padding: 15px 0.5rem 220px;
      }
      
      .input-group {
        gap: 0.3rem;
      }
      
      button {
        padding: 0.4rem 0.6rem;
        min-width: 60px;
        font-size: 0.7rem;
      }
    }
  </style>
</head>
<body>
  <h1>üõ•Ô∏è A Arca - Ritual de Travessia üåä</h1>
  <p>Digite sua invoca√ß√£o abaixo e sinta a resposta da Arca:</p>
  <div id="response"></div>

  <div class="fixed-footer">
    <div class="input-group">
      <textarea id="userInput" placeholder="Escreva com presen√ßa. Aqui n√£o h√° espa√ßo para palavras vazias."></textarea>
      <button onclick="sendMessage()">Invocar</button>
    </div>

    <div id="loader" style="display:none;">
      <div id="loadingBar"></div>
    </div>

    <p class="footer-note">Os dados fornecidos s√£o privados e protegidos!</p>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <script>
    // Fun√ß√£o para processar o texto e garantir que as palavras sejam separadas corretamente
    function formatText(text) {
      // Fun√ß√£o auxiliar para separar palavras longas
      function separateWords(longText) {
        // Lista de palavras comuns em portugu√™s para usar como refer√™ncia
        const commonWords = ['a', 'o', 'e', 'de', 'da', 'do', 'em', 'no', 'na', 'para', 'por', 'com', 'sem', 'que', 'se', 'como', 'mas', 'ou', 'seu', 'sua', 'meu', 'minha', 'teu', 'tua', 'nosso', 'nossa', 'este', 'esta', 'esse', 'essa', 'aquele', 'aquela', 'quando', 'onde', 'quem', 'qual', 'quanto', 'porque', 'pois', 'ent√£o', 'assim', 'tamb√©m', 'muito', 'pouco', 'mais', 'menos', 'grande', 'pequeno', 'bom', 'bem', 'mal', 'melhor', 'pior', 'todo', 'toda', 'algum', 'alguma', 'nenhum', 'nenhuma', 'outro', 'outra', 'mesmo', 'mesma', 'cada', 'qualquer', 'v√°rios', 'v√°rias', 'alguns', 'algumas', 'todos', 'todas', 'entre', 'sobre', 'sob', 'ap√≥s', 'antes', 'depois', 'durante', 'desde', 'at√©', 'contra', 'segundo', 'conforme', 'atrav√©s', 'perante', 'mediante', 'exceto', 'salvo', 'sen√£o', 'enquanto', 'embora', 'portanto', 'contudo', 'todavia', 'entretanto', 'por√©m', 'logo', 'pois', 'ent√£o', 'por isso', 'assim', 'desse modo', 'dessa forma', 'por conseguinte', 'consequentemente', 'por exemplo', 'isto √©', 'ou seja', 'a saber', 'ali√°s', 'al√©m disso', 'inclusive', 'tamb√©m', 'ainda', 'n√£o', 'sim', 'talvez', 'certamente', 'provavelmente', 'possivelmente', 'realmente', 'verdadeiramente', 'felizmente', 'infelizmente', 'principalmente', 'especialmente', 'particularmente', 'geralmente', 'frequentemente', 'raramente', 'dificilmente', 'facilmente', 'rapidamente', 'lentamente', 'cuidadosamente', 'completamente', 'parcialmente', 'totalmente', 'absolutamente', 'relativamente', 'aproximadamente', 'exatamente', 'precisamente', 'apenas', 'somente', 'exclusivamente', 'inclusive', 'tamb√©m', 'ainda', 'j√°', 'agora', 'hoje', 'ontem', 'amanh√£', 'sempre', 'nunca', 'jamais', 'aqui', 'ali', 'l√°', 'acol√°', 'dentro', 'fora', 'acima', 'abaixo', 'adiante', 'atr√°s', 'perto', 'longe', 'junto', 'separado', 'certo', 'errado', 'verdadeiro', 'falso', 'bom', 'mau', 'alto', 'baixo', 'grande', 'pequeno', 'forte', 'fraco', 'r√°pido', 'lento', 'f√°cil', 'dif√≠cil', 'simples', 'complexo', 'claro', 'escuro', 'quente', 'frio', 'novo', 'velho', 'jovem', 'idoso', 'bonito', 'feio', 'feliz', 'triste', 'alegre', 'melanc√≥lico', 'calmo', 'agitado', 'tranquilo', 'nervoso', 'seguro', 'inseguro', 'confiante', 'desconfiado', 'otimista', 'pessimista', 'realista', 'sonhador', 'pr√°tico', 'te√≥rico', 'objetivo', 'subjetivo', 'racional', 'emocional', 'l√≥gico', 'il√≥gico', 'coerente', 'incoerente', 'consistente', 'inconsistente', 'est√°vel', 'inst√°vel', 'permanente', 'tempor√°rio', 'definitivo', 'provis√≥rio', 'absoluto', 'relativo', 'completo', 'incompleto', 'perfeito', 'imperfeito', 'exato', 'inexato', 'preciso', 'impreciso', 'correto', 'incorreto', 'adequado', 'inadequado', 'apropriado', 'inapropriado', 'conveniente', 'inconveniente', 'oportuno', 'inoportuno', 'vantajoso', 'desvantajoso', 'ben√©fico', 'prejudicial', '√∫til', 'in√∫til', 'necess√°rio', 'desnecess√°rio', 'essencial', 'sup√©rfluo', 'importante', 'insignificante', 'relevante', 'irrelevante', 'fundamental', 'acess√≥rio', 'primordial', 'secund√°rio', 'priorit√°rio', 'dispens√°vel', 'indispens√°vel', 'vital', 'trivial', 'crucial', 'banal', 'excepcional', 'comum', 'extraordin√°rio', 'ordin√°rio', 'especial', 'normal', 'peculiar', 'usual', 'singular', 'regular', '√∫nico', 't√≠pico', 'original', 'convencional', 'inovador', 'tradicional', 'moderno', 'antigo', 'contempor√¢neo', 'ultrapassado', 'atual', 'obsoleto', 'recente', 'remoto', 'presente', 'passado', 'futuro', 'imediato', 'distante', 'pr√≥ximo', 'long√≠nquo', 'breve', 'duradouro', 'ef√™mero', 'eterno', 'moment√¢neo', 'perp√©tuo', 'tempor√°rio', 'permanente', 'provis√≥rio', 'definitivo', 'transit√≥rio', 'est√°vel', 'inst√°vel', 'fixo', 'm√≥vel', 'est√°tico', 'din√¢mico', 'im√≥vel', 'ativo', 'passivo', 'inerte', 'en√©rgico', 'ap√°tico', 'vigoroso', 'fraco', 'forte', 'd√©bil', 'robusto', 'fr√°gil', 'resistente', 'vulner√°vel', 's√≥lido', 'fluido', 'r√≠gido', 'flex√≠vel', 'duro', 'mole', '√°spero', 'suave', 'rugoso', 'liso', 'seco', '√∫mido', 'molhado', 'seco', 'quente', 'frio', 'morno', 'gelado', 'fervente', 'congelado', 'claro', 'escuro', 'brilhante', 'opaco', 'luminoso', 'sombrio', 'transparente', 'opaco', 'vis√≠vel', 'invis√≠vel', 'aparente', 'oculto', 'evidente', 'disfar√ßado', 'expl√≠cito', 'impl√≠cito', 'manifesto', 'latente', 'revelado', 'escondido', 'exposto', 'coberto', 'aberto', 'fechado', 'amplo', 'restrito', 'vasto', 'limitado', 'extenso', 'reduzido', 'expandido', 'contra√≠do', 'aumentado', 'diminu√≠do', 'crescente', 'decrescente', 'ascendente', 'descendente', 'superior', 'inferior', 'm√°ximo', 'm√≠nimo', '√≥timo', 'p√©ssimo', 'excelente', 'terr√≠vel', 'maravilhoso', 'horr√≠vel', 'espl√™ndido', 'deplor√°vel', 'magn√≠fico', 'lastim√°vel', 'sublime', 'rid√≠culo', 'admir√°vel', 'desprez√≠vel', 'louv√°vel', 'conden√°vel', 'honroso', 'vergonhoso', 'digno', 'indigno', 'respeit√°vel', 'desprez√≠vel', 'honesto', 'desonesto', '√≠ntegro', 'corrupto', 'justo', 'injusto', 'imparcial', 'parcial', 'equitativo', 'tendencioso', 'legal', 'ilegal', 'leg√≠timo', 'ileg√≠timo', 'l√≠cito', 'il√≠cito', 'moral', 'imoral', '√©tico', 'anti√©tico', 'correto', 'incorreto', 'certo', 'errado', 'verdadeiro', 'falso', 'aut√™ntico', 'falso', 'genu√≠no', 'artificial', 'natural', 'sint√©tico', 'org√¢nico', 'inorg√¢nico', 'puro', 'impuro', 'limpo', 'sujo', 'contaminado', 'est√©ril', 'infectado', 'saud√°vel', 'doente', 's√£o', 'enfermo', 'robusto', 'debilitado', 'forte', 'fraco', 'vigoroso', 'fr√°gil', 'resistente', 'vulner√°vel', 'imune', 'suscet√≠vel', 'sens√≠vel', 'insens√≠vel', 'consciente', 'inconsciente', 'ciente', 'ignorante', 'informado', 'desinformado', 'culto', 'inculto', 'educado', 'ignorante', 'instru√≠do', 'desinstru√≠do', 'alfabetizado', 'analfabeto', 'letrado', 'iletrado', 'erudito', 'leigo', 'especialista', 'generalista', 'profissional', 'amador', 'experiente', 'inexperiente', 'habilidoso', 'in√°bil', 'competente', 'incompetente', 'capaz', 'incapaz', 'apto', 'inapto', 'qualificado', 'desqualificado', 'preparado', 'despreparado', 'treinado', 'destreinado', 'disciplinado', 'indisciplinado', 'organizado', 'desorganizado', 'met√≥dico', 'ca√≥tico', 'sistem√°tico', 'assistem√°tico', 'ordenado', 'desordenado', 'regular', 'irregular', 'uniforme', 'disforme', 'sim√©trico', 'assim√©trico', 'proporcional', 'desproporcional', 'equilibrado', 'desequilibrado', 'est√°vel', 'inst√°vel', 'constante', 'inconstante', 'consistente', 'inconsistente', 'coerente', 'incoerente', 'l√≥gico', 'il√≥gico', 'racional', 'irracional', 'razo√°vel', 'irrazo√°vel', 'sensato', 'insensato', 'prudente', 'imprudente', 'cauteloso', 'descuidado', 'atento', 'desatento', 'vigilante', 'negligente', 'diligente', 'pregui√ßoso', 'aplicado', 'desleixado', 'esfor√ßado', 'indolente', 'trabalhador', 'pregui√ßoso', 'produtivo', 'improdutivo', 'eficiente', 'ineficiente', 'eficaz', 'ineficaz', '√∫til', 'in√∫til', 'proveitoso', 'improf√≠cuo', 'vantajoso', 'desvantajoso', 'ben√©fico', 'prejudicial', 'favor√°vel', 'desfavor√°vel', 'prop√≠cio', 'adverso', 'oportuno', 'inoportuno', 'conveniente', 'inconveniente', 'adequado', 'inadequado', 'apropriado', 'inapropriado', 'pertinente', 'impertinente', 'relevante', 'irrelevante', 'significativo', 'insignificante', 'importante', 'trivial', 'essencial', 'sup√©rfluo', 'fundamental', 'acess√≥rio', 'indispens√°vel', 'dispens√°vel', 'necess√°rio', 'desnecess√°rio', 'obrigat√≥rio', 'facultativo', 'imperativo', 'opcional', 'compuls√≥rio', 'volunt√°rio', 'for√ßado', 'espont√¢neo', 'imposto', 'livre', 'obrigado', 'permitido', 'proibido', 'autorizado', 'vetado', 'liberado', 'restrito', 'permitido', 'vedado', 'l√≠cito', 'il√≠cito', 'legal', 'ilegal', 'leg√≠timo', 'ileg√≠timo', 'regular', 'irregular', 'normal', 'anormal', 'comum', 'incomum', 'usual', 'inusual', 'frequente', 'raro', 'habitual', 'excepcional', 'ordin√°rio', 'extraordin√°rio', 'banal', 'not√°vel', 'trivial', 'relevante', 'insignificante', 'importante', 'med√≠ocre', 'excelente', 'comum', 'especial', 'vulgar', 'distinto', 'simples', 'complexo', 'f√°cil', 'dif√≠cil', 'complicado', 'descomplicado', 'intrincado', 'direto', 'confuso', 'claro', 'obscuro', 'evidente', 'amb√≠guo', 'expl√≠cito', 'impl√≠cito', 'definido', 'indefinido', 'preciso', 'vago', 'exato', 'aproximado', 'absoluto', 'relativo', 'concreto', 'abstrato', 'objetivo', 'subjetivo', 'real', 'imagin√°rio', 'verdadeiro', 'falso', 'aut√™ntico', 'fict√≠cio', 'genu√≠no', 'artificial', 'natural', 'sint√©tico', 'original', 'c√≥pia', 'prim√°rio', 'secund√°rio', 'principal', 'acess√≥rio', 'central', 'perif√©rico', 'essencial', 'acidental', 'intr√≠nseco', 'extr√≠nseco', 'inerente', 'adquirido', 'inato', 'aprendido', 'cong√™nito', 'desenvolvido', 'heredit√°rio', 'ambiental', 'gen√©tico', 'cultural', 'biol√≥gico', 'social', 'f√≠sico', 'mental', 'material', 'espiritual', 'corporal', 'ps√≠quico', 'tang√≠vel', 'intang√≠vel', 'concreto', 'abstrato', 'vis√≠vel', 'invis√≠vel', 'percept√≠vel', 'impercept√≠vel', 'sens√≠vel', 'insens√≠vel', 'aud√≠vel', 'inaud√≠vel', 'palp√°vel', 'impalp√°vel', 'mensur√°vel', 'imensur√°vel', 'quantific√°vel', 'inquantific√°vel', 'finito', 'infinito', 'limitado', 'ilimitado', 'restrito', 'irrestrito', 'condicionado', 'incondicionado', 'relativo', 'absoluto', 'parcial', 'total', 'fragmentado', 'integral', 'incompleto', 'completo', 'parcial', 'inteiro', 'fracionado', '√≠ntegro', 'dividido', 'unificado', 'separado', 'junto', 'isolado', 'conectado', 'independente', 'dependente', 'aut√¥nomo', 'subordinado', 'livre', 'condicionado', 'emancipado', 'subjugado', 'dominante', 'submisso', 'superior', 'inferior', 'privilegiado', 'desfavorecido', 'vantajoso', 'desvantajoso', 'beneficiado', 'prejudicado', 'favorecido', 'desfavorecido', 'afortunado', 'desafortunado', 'sortudo', 'azarado', 'feliz', 'infeliz', 'contente', 'descontente', 'satisfeito', 'insatisfeito', 'realizado', 'frustrado', 'pleno', 'vazio', 'completo', 'incompleto', 'cheio', 'vazio', 'abundante', 'escasso', 'farto', 'carente', 'rico', 'pobre', 'pr√≥spero', 'miser√°vel', 'opulento', 'indigente', 'abastado', 'necessitado', 'afluente', 'carente', 'privilegiado', 'desprivilegiado', 'afortunado', 'desafortunado', 'bem-sucedido', 'malsucedido', 'vitorioso', 'derrotado', 'triunfante', 'fracassado', 'vencedor', 'perdedor', 'campe√£o', 'derrotado', 'primeiro', '√∫ltimo', 'superior', 'inferior', 'melhor', 'pior', '√≥timo', 'p√©ssimo', 'excelente', 'terr√≠vel', 'excepcional', 'med√≠ocre', 'extraordin√°rio', 'ordin√°rio', 'not√°vel', 'comum', 'distinto', 'vulgar', 'especial', 'banal', '√∫nico', 'comum', 'singular', 'plural', 'individual', 'coletivo', 'pessoal', 'impessoal', 'particular', 'geral', 'espec√≠fico', 'gen√©rico', 'concreto', 'abstrato', 'definido', 'indefinido', 'determinado', 'indeterminado', 'certo', 'incerto', 'seguro', 'inseguro', 'est√°vel', 'inst√°vel', 'fixo', 'vari√°vel', 'constante', 'inconstante', 'permanente', 'tempor√°rio', 'duradouro', 'ef√™mero', 'eterno', 'transit√≥rio', 'perp√©tuo', 'moment√¢neo', 'infinito', 'finito', 'ilimitado', 'limitado', 'imenso', 'pequeno', 'vasto', 'restrito', 'amplo', 'estreito', 'extenso', 'reduzido', 'longo', 'curto', 'alto', 'baixo', 'profundo', 'raso', 'largo', 'estreito', 'grosso', 'fino', 'pesado', 'leve', 'denso', 'rarefeito', 'compacto', 'esparso', 'concentrado', 'dilu√≠do', 'espesso', 'fino', 'forte', 'fraco', 'intenso', 'suave', 'violento', 'moderado', 'extremo', 'm√©dio', 'radical', 'conservador', 'revolucion√°rio', 'tradicional', 'inovador', 'convencional', 'original', 'comum', 'incomum', 'normal', 'anormal', 'regular', 'irregular', 'padr√£o', 'at√≠pico', 't√≠pico', 'excepcional', 'usual', 'inusual', 'frequente', 'raro', 'comum', 'incomum', 'ordin√°rio', 'extraordin√°rio', 'banal', 'not√°vel', 'trivial', 'relevante', 'insignificante', 'importante', 'med√≠ocre', 'excelente', 'comum', 'especial', 'vulgar', 'distinto', 'simples', 'complexo', 'f√°cil', 'dif√≠cil', 'complicado', 'descomplicado', 'intrincado', 'direto', 'confuso', 'claro', 'obscuro', 'evidente', 'amb√≠guo', 'expl√≠cito', 'impl√≠cito', 'definido', 'indefinido', 'preciso', 'vago', 'exato', 'aproximado', 'absoluto', 'relativo', 'concreto', 'abstrato', 'objetivo', 'subjetivo', 'real', 'imagin√°rio', 'verdadeiro', 'falso', 'aut√™ntico', 'fict√≠cio', 'genu√≠no', 'artificial', 'natural', 'sint√©tico', 'original', 'c√≥pia', 'prim√°rio', 'secund√°rio', 'principal', 'acess√≥rio', 'central', 'perif√©rico', 'essencial', 'acidental', 'intr√≠nseco', 'extr√≠nseco', 'inerente', 'adquirido', 'inato', 'aprendido', 'cong√™nito', 'desenvolvido', 'heredit√°rio', 'ambiental', 'gen√©tico', 'cultural', 'biol√≥gico', 'social', 'f√≠sico', 'mental', 'material', 'espiritual', 'corporal', 'ps√≠quico', 'tang√≠vel', 'intang√≠vel', 'concreto', 'abstrato', 'vis√≠vel', 'invis√≠vel', 'percept√≠vel', 'impercept√≠vel', 'sens√≠vel', 'insens√≠vel', 'aud√≠vel', 'inaud√≠vel', 'palp√°vel', 'impalp√°vel', 'mensur√°vel', 'imensur√°vel', 'quantific√°vel', 'inquantific√°vel', 'finito', 'infinito', 'limitado', 'ilimitado', 'restrito', 'irrestrito', 'condicionado', 'incondicionado', 'relativo', 'absoluto', 'parcial', 'total', 'fragmentado', 'integral', 'incompleto', 'completo', 'parcial', 'inteiro', 'fracionado', '√≠ntegro', 'dividido', 'unificado', 'separado', 'junto', 'isolado', 'conectado', 'independente', 'dependente', 'aut√¥nomo', 'subordinado', 'livre', 'condicionado', 'emancipado', 'subjugado', 'dominante', 'submisso', 'superior', 'inferior', 'privilegiado', 'desfavorecido', 'vantajoso', 'desvantajoso', 'beneficiado', 'prejudicado', 'favorecido', 'desfavorecido', 'afortunado', 'desafortunado', 'sortudo', 'azarado', 'feliz', 'infeliz', 'contente', 'descontente', 'satisfeito', 'insatisfeito', 'realizado', 'frustrado', 'pleno', 'vazio', 'completo', 'incompleto', 'cheio', 'vazio', 'abundante', 'escasso', 'farto', 'carente', 'rico', 'pobre', 'pr√≥spero', 'miser√°vel', 'opulento', 'indigente', 'abastado', 'necessitado', 'afluente', 'carente', 'privilegiado', 'desprivilegiado', 'afortunado', 'desafortunado', 'bem-sucedido', 'malsucedido', 'vitorioso', 'derrotado', 'triunfante', 'fracassado', 'vencedor', 'perdedor', 'campe√£o', 'derrotado', 'primeiro', '√∫ltimo', 'superior', 'inferior', 'melhor', 'pior', '√≥timo', 'p√©ssimo', 'excelente', 'terr√≠vel', 'excepcional', 'med√≠ocre', 'extraordin√°rio', 'ordin√°rio', 'not√°vel', 'comum', 'distinto', 'vulgar', 'especial', 'banal', '√∫nico', 'comum', 'singular', 'plural', 'individual', 'coletivo', 'pessoal', 'impessoal', 'particular', 'geral', 'espec√≠fico', 'gen√©rico', 'concreto', 'abstrato', 'definido', 'indefinido', 'determinado', 'indeterminado', 'certo', 'incerto', 'seguro', 'inseguro', 'est√°vel', 'inst√°vel', 'fixo', 'vari√°vel', 'constante', 'inconstante', 'permanente', 'tempor√°rio', 'duradouro', 'ef√™mero', 'eterno', 'transit√≥rio', 'perp√©tuo', 'moment√¢neo', 'infinito', 'finito', 'ilimitado', 'limitado', 'imenso', 'pequeno', 'vasto', 'restrito', 'amplo', 'estreito', 'extenso', 'reduzido', 'longo', 'curto', 'alto', 'baixo', 'profundo', 'raso', 'largo', 'estreito', 'grosso', 'fino', 'pesado', 'leve', 'denso', 'rarefeito', 'compacto', 'esparso', 'concentrado', 'dilu√≠do', 'espesso', 'fino', 'forte', 'fraco', 'intenso', 'suave', 'violento', 'moderado', 'extremo', 'm√©dio', 'radical', 'conservador', 'revolucion√°rio', 'tradicional', 'inovador', 'convencional', 'original', 'comum', 'incomum', 'normal', 'anormal', 'regular', 'irregular', 'padr√£o', 'at√≠pico', 't√≠pico', 'excepcional', 'usual', 'inusual', 'frequente', 'raro', 'comum', 'incomum', 'ordin√°rio', 'extraordin√°rio', 'banal', 'not√°vel', 'trivial', 'relevante', 'insignificante', 'importante'];
        
        // Fun√ß√£o para verificar se uma substring √© uma palavra comum
        function isCommonWord(word) {
          return commonWords.includes(word.toLowerCase());
        }
        
        // Tenta identificar palavras em uma string longa
        let result = '';
        let currentWord = '';
        
        for (let i = 0; i < longText.length; i++) {
          const char = longText[i];
          currentWord += char;
          
          // Verifica se a palavra atual √© uma palavra comum
          if (currentWord.length >= 3) {
            for (let j = 3; j <= currentWord.length; j++) {
              const possibleWord = currentWord.substring(0, j);
              if (isCommonWord(possibleWord)) {
                result += possibleWord + ' ';
                currentWord = currentWord.substring(j);
                i = i - (currentWord.length);
                break;
              }
            }
          }
          
          // Se a palavra atual ficar muito longa, adiciona um espa√ßo
          if (currentWord.length >= 10) {
            result += currentWord + ' ';
            currentWord = '';
          }
        }
        
        // Adiciona qualquer palavra restante
        if (currentWord.length > 0) {
          result += currentWord;
        }
        
        return result;
      }
      
      // Adiciona espa√ßos entre palavras que possam estar juntas
      return text
        // Regras b√°sicas de separa√ß√£o
        .replace(/([a-zA-Z0-9])([A-Z])/g, '$1 $2') // Adiciona espa√ßo entre camelCase
        .replace(/([.:;,?!])([a-zA-Z])/g, '$1 $2') // Adiciona espa√ßo ap√≥s pontua√ß√£o
        .replace(/([a-zA-Z])([.:;,?!])/g, '$1$2 ') // Adiciona espa√ßo ap√≥s pontua√ß√£o seguida de letra
        
        // Regras espec√≠ficas para palavras coladas
        .replace(/([a-z√°√†√¢√£√©√®√™√≠√Ø√≥√¥√µ√∂√∫√ß√±])([A-Z√Å√Ä√Ç√É√â√à√ä√ç√è√ì√î√ï√ñ√ö√á√ë])/g, '$1 $2') // Adiciona espa√ßo entre min√∫scula e mai√∫scula
        .replace(/([a-zA-Z])([0-9])/g, '$1 $2') // Adiciona espa√ßo entre letra e n√∫mero
        .replace(/([0-9])([a-zA-Z])/g, '$1 $2') // Adiciona espa√ßo entre n√∫mero e letra
        
        // Processa palavras longas
        .replace(/(\w{15,})/g, function(match) {
          return separateWords(match);
        })
        
        // Adiciona espa√ßos a cada 5-8 caracteres em palavras muito longas
        .replace(/(\w{10,14})/g, function(match) {
          return match.replace(/(\w{5,8})(?=\w)/g, '$1 ');
        })
        
        .trim();
    }
    
    async function sendMessage() {
      const input = document.getElementById("userInput").value.trim();
      const responseDiv = document.getElementById("response");
      const loader = document.getElementById("loader");
      const loadingBar = document.getElementById("loadingBar");

      if (!input) {
        responseDiv.innerHTML = "‚ö†Ô∏è Nada foi invocado.";
        return;
      }

      responseDiv.innerHTML = "Invocando...";
      loader.style.display = "block";
      loadingBar.style.width = "0%";

      let progress = 0;
      const interval = setInterval(() => {
        if (progress < 95) {
          progress += 1;
          loadingBar.style.width = progress + "%";
        }
      }, 30);

      try {
        const response = await fetch("/api/arca", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ input })
        });

        if (!response.ok) throw new Error("Falha ao invocar: " + response.statusText);

        const reader = response.body.getReader();
        const decoder = new TextDecoder("utf-8");
        let buffer = "";
        let fullText = "";

        while (true) {
          const { done, value } = await reader.read();
          if (done) break;

          buffer += decoder.decode(value, { stream: true });
          const parts = buffer.split("\n\n");
          buffer = parts.pop();

          for (let part of parts) {
            if (!part.startsWith("data: ")) continue;

            const content = part.replace("data: ", "").trim();
            if (content === "[DONE]") {
              clearInterval(interval);
              loader.style.display = "none";
              loadingBar.style.width = "100%";
              // Aplica formata√ß√£o final ao texto completo
              const formattedText = formatText(fullText.trim());
              responseDiv.innerHTML = marked.parse(formattedText);
              return;
            }

            fullText += content;
            // Formata o texto para exibi√ß√£o enquanto est√° sendo recebido
            const formattedText = formatText(fullText.trim());
            responseDiv.innerHTML = marked.parse(formattedText);
          }
        }
      } catch (err) {
        clearInterval(interval);
        loader.style.display = "none";
        responseDiv.innerHTML = "‚ö†Ô∏è A Arca silenciou: " + err.message;
      }
    }

    window.sendMessage = sendMessage;
  </script>
</body>
</html>
